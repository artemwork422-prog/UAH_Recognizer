# üíµ UAH Smart Scanner - ESP32-CAM + Edge Impulse

–ü—Ä–æ–≥—Ä–∞–º–∞ –¥–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –Ω–æ–º—ñ–Ω–∞–ª—É —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –≥—Ä–∏–≤–Ω–µ–≤–∏—Ö –∫—É–ø—é—Ä –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é AI –Ω–∞ ESP32-CAM –∑ –æ–±–º–µ–∂–µ–Ω–æ—é –ø–∞–º'—è—Ç—Ç—é (2MB PSRAM).

## üéØ –û—Å–Ω–æ–≤–Ω—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- ‚úÖ **–ì–∞—Ä—è—á—É —Ç–æ—á–∫—É WiFi** - –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ "UAH_Scanner" (–ø–∞—Ä–æ–ª—å: 12345678)
- ‚úÖ **–ü–æ—Ç–æ–∫–æ–≤–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—è MJPEG** - –¥–∏–≤—ñ—Ç—å—Å—è –≤—ñ–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- ‚úÖ **AI —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è** - –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "SCAN" —â–æ–± —Ä–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ –Ω–æ–º—ñ–Ω–∞–ª
- ‚úÖ **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –ø–∞–º'—è—Ç—å** - RGB –±—É—Ñ–µ—Ä –∑–≤—ñ–ª—å–Ω—è—î—Ç—å—Å—è –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è inference
- ‚úÖ **–°—É—á–∞—Å–Ω–∏–π –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤

## üìã –í–∏–º–æ–≥–∏ –¥–æ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è

- ESP32-CAM (OV2640 –∫–∞–º–µ—Ä–∞)
- 2 MB PSRAM (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è —Ä–æ–±–æ—Ç–∏)
- Edge Impulse –º–æ–¥–µ–ª—å –¥–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –∫—É–ø—é—Ä

## üöÄ –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è —Ç–∞ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è PlatformIO

```bash
# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç–∞ —Å–∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏
pio run -e esp32cam -t upload

# –ú–æ–Ω—ñ—Ç–æ—Ä
pio device monitor -b 115200
```

## üåê –í–µ–±-–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ü—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:

1. **–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ WiFi:**
   - SSID: `UAH_Scanner`
   - –ü–∞—Ä–æ–ª—å: `12345678`

2. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:**
   - –ê–¥—Ä–µ—Å–∞: `http://192.168.4.1`

3. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
   - –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **SCAN** —â–æ–± —Ä–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ –∫—É–ø—é—Ä—É
   - –†–µ–∑—É–ª—å—Ç–∞—Ç –∑'—è–≤–∏—Ç—å—Å—è —É –∂–æ–≤—Ç—ñ–π –∫–æ—Ä–æ–±—Ü—ñ
   - FPS —ñ —Å—Ç–∞—Ç—É—Å –≤–Ω–∏–∑—É

## üîß –û—Å–Ω–æ–≤–Ω—ñ –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è

| –ü—Ä–æ–±–ª–µ–º–∞ –≤ –æ—Ä–∏–≥—ñ–Ω–∞–ª—ñ | –†—ñ—à–µ–Ω–Ω—è |
|---|---|
| RGB –±—É—Ñ–µ—Ä –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–≤—ñ–ª—å–Ω—è–≤—Å—è | –ó–≤—ñ–ª—å–Ω—è—î—Ç—å—Å—è –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è inference |
| Infinite loop —É stream_handler | –ó–∞–º—ñ–Ω–µ–Ω–æ –Ω–∞ non-blocking design |
| Race conditions | –î–æ–¥–∞–Ω–æ Semaphore –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó |
| –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ MJPEG —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è | –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ boundary –º–∞—Ä–∫–µ—Ä–∏ |
| –í–µ–ª–∏–∫–∞ JPEG —è–∫—ñ—Å—Ç—å | –ó–º–µ–Ω—à–µ–Ω–∞ –¥–æ —è–∫–æ—Å—Ç—ñ 10 |

## üìä –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ü–æ—Ç–æ–∫—ñ–≤

```
main() Loop
  ‚îú‚îÄ Check trigger button
  ‚îú‚îÄ Handle scan requests
  ‚îú‚îÄ Manage PSRAM memory
  
Web Server (Non-blocking)
  ‚îú‚îÄ Stream MJPEG frames
  ‚îú‚îÄ Accept /scan requests
  ‚îú‚îÄ Serve status JSON
  
Inference Handler
  ‚îú‚îÄ Allocate RGB buffer (PSRAM)
  ‚îú‚îÄ Decode JPEG ‚Üí RGB
  ‚îú‚îÄ Run Edge Impulse
  ‚îú‚îÄ Free RGB buffer
  ‚îî‚îÄ Return result
```

## üíæ –†–æ–∑–ø–æ–¥—ñ–ª –ü–∞–º'—è—Ç—ñ

- **Flash:** 4MB (–ø—Ä–æ–≥—Ä–∞–º–∞ + –º–æ–¥–µ–ª—å)
- **SRAM:** 520KB (—Å—Ç–µ–∫, —Ç–∏–º—á–∞—Å–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ)
- **PSRAM:** 2MB 
  - –ö–∞–º–µ—Ä–∞ –±—É—Ñ–µ—Ä–∏: ~48KB
  - RGB –±—É—Ñ–µ—Ä: 230KB (—Ç—ñ–ª—å–∫–∏ –ø—ñ–¥ —á–∞—Å inference!)
  - –í—ñ–ª—å–Ω–∞: ~1.7MB

## üîå GPIO –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ –¥–ª—è ESP32-CAM OV2640:
- Clock: GPIO 0
- SDA/SCL: GPIO 26/27
- Data pins: 5, 18, 19, 21, 36, 39, 34, 35
- Sync pins: 22, 23, 25

## üêõ –†—ñ—à–µ–Ω–Ω—è –ü—Ä–æ–±–ª–µ–º

### "Memory Error" –ø—Ä–∏ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—ñ:
–ó–º–µ–Ω—à—ñ—Ç—å —è–∫—ñ—Å—Ç—å JPEG —É CameraHandler.h:
```cpp
config.jpeg_quality = 5;  // –ù–∏–∂—á–µ = –º–µ–Ω—à–µ –ø–∞–º'—è—Ç—ñ
```

### "Decode Error":
JPEG –º–æ–∂–µ –±—É—Ç–∏ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–π. –°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à—É —è–∫—ñ—Å—Ç—å.

### "AI Error":
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –º–æ–¥–µ–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞ –≤ lib/ —ñ –º–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω–µ EI_CLASSIFIER_DSP_INPUT_FRAME_SIZE.

### WiFi –Ω–µ –∑'—è–≤–ª—è—î—Ç—å—Å—è:
–°–∫–∏–¥–Ω—ñ—Ç—å ESP32 –∞–±–æ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ GPIO –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è.

## üìù –ù–∞–≤—á–∞–Ω–Ω—è –ú–æ–¥–µ–ª—ñ

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ https://studio.edgeimpulse.com
2. –ó–±–µ—Ä—ñ—Ç—å –¥–∞—Ç–∞—Å–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ–π –≤—Å—ñ—Ö –Ω–æ–º—ñ–Ω–∞–ª—ñ–≤ (10, 20, 50, 100, 200, 500 –≥—Ä–Ω)
3. –¢—Ä–µ–Ω—É—î–º–æ –º–æ–¥–µ–ª—ñ: Object Detection –∞–±–æ Classification
4. –ï–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ —è–∫ Arduino Library
5. –°–∫–æ–ø—ñ—é–π—Ç–µ –≤ lib/Robotics_Practice_inferencing/

## üìÑ –§–∞–π–ª–∏ –ü—Ä–æ–µ–∫—Ç—É

- `src/main.cpp` - –ì–æ–ª–æ–≤–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –∑ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é
- `src/CameraHandler.h` - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∫–∞–º–µ—Ä–∏
- `src/WebServerHandler.h` - HTTP —Å–µ—Ä–≤–µ—Ä —Ç–∞ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `src/InferenceHandler.h` - Edge Impulse inference –∑ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—î—é –ø–∞–º'—è—Ç—ñ
- `platformio.ini` - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è PlatformIO

## ‚ö° –ü–æ—Ä–∞–¥–Ω–∏–∫ –¥–ª—è –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

–Ø–∫—â–æ –≤—Å–µ —â–µ –Ω–µ –≤–∏—Å—Ç–∞—á–∞—î –ø–∞–º'—è—Ç—ñ:

1. –ó–º–µ–Ω—à—ñ—Ç—å JPEG —è–∫—ñ—Å—Ç—å –¥–æ 3-5
2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ QVGA (320x240) –∑–∞–º—ñ—Å—Ç—å VGA
3. –°–∫–æ—Ä–æ—Ç—ñ—Ç—å –º–æ–¥–µ–ª—å Edge Impulse
4. –°—Ç–≤–æ—Ä—ñ—Ç—å –æ–∫—Ä–µ–º–∏–π task –¥–ª—è inference

## üìö –ü–æ—Å–∏–ª–∞–Ω–Ω—è

- Edge Impulse: https://edgeimpulse.com
- ESP32 Documentation: https://docs.espressif.com
- PlatformIO: https://platformio.org

---

**–ú–æ–≤–∞:** –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞  
**Framework:** PlatformIO + Arduino SDK  
**–î–∞—Ç–∞:** –õ—é—Ç–∏–π 2026
